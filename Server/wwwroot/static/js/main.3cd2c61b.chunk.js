(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{163:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n,r,i,c=a(0),o=a.n(c),d=a(14),l=a.n(d),s=(a(163),a(26)),u=a.n(s),j=a(33),b=a(52),h=a(7),p=a(19),f=a(115),O=a(252),x=a(243),m=a(53),g=a(103),v=a(65),y=a(60),C=a(246),k=a(247),w=a(248),S=a(249),D=a(253),N=a(107),F=a(250),E=a(134),R=a.n(E),M=a(63),L=a.n(M),z=a(256),T=a(3),U=Object(f.a)((function(e){return{drawer:function(e){return{margin:20,marginLeft:40,"@media (min-width: 600px)":{minWidth:e.width||300,maxWidth:e.width||500}}},paper:{"@media (max-width: 600px)":{width:"100%"}}}})),W=function(e){var t=e.open,a=e.title,n=e.children,r=e.width,i=e.handleClose,c=U({width:r}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return{position:"absolute",fontSize:20,fontWeight:600,color:"#bbbbbb",transform:"rotate(90deg)",width:e,height:t,left:(e-t)/-2,top:e/2}}(300);return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(z.a,{classes:{paper:c.paper},anchor:"right",open:t,onClose:function(){return i&&i()},children:Object(T.jsxs)("div",{role:"presentation",className:c.drawer,children:[Object(T.jsx)("div",{style:o,children:a}),n]})})})},B=a(197),I=a(196),A=a(238),G=a(257),P=a(239),J=a(240),_=a(87),K=a.n(_),V=Object(f.a)((function(e){return{badge:function(t){return{display:"inline-block",color:"dark"===e.palette.type?t.color:"black",backgroundColor:"dark"===e.palette.type?"#222":t.color,borderRadius:5,paddingLeft:e.spacing(1),paddingRight:e.spacing(1),marginRight:e.spacing(1),fontSize:"80%"}},badgeContainer:function(t){return{display:"inline-block",padding:0,marginLeft:0,marginRight:e.spacing(1),fontSize:"80%"}},badgeLeft:function(t){return{display:"inline-block",color:"dark"===e.palette.type?t.color:"black",backgroundColor:"dark"===e.palette.type?"#222":t.color,borderTopLeftRadius:5,borderBottomLeftRadius:5,paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},badgeRight:function(t){return{display:"inline-block",color:"dark"===e.palette.type?"#f0f0f0":"#444444",backgroundColor:"dark"===e.palette.type?"#444444":"#f0f0f0",borderTopRightRadius:5,borderBottomRightRadius:5,paddingLeft:e.spacing(1),paddingRight:e.spacing(1),marginLeft:0}}}})),H=function(e){var t=e.title,a=e.text,n=e.color,r=V({color:n});return Object(T.jsxs)(T.Fragment,{children:[t&&Object(T.jsxs)("div",{className:r.badgeContainer,children:[Object(T.jsx)("div",{className:r.badgeLeft,children:t}),Object(T.jsx)("div",{className:r.badgeRight,children:a})]}),!t&&Object(T.jsx)("div",{className:r.badge,children:a})]})},Z=a(88),q=a.n(Z),Q=function(e){var t=1024;if(e<t)return"".concat(e," B");var a=1024*t;if(e<a)return"".concat((e/t).toFixed(2)," KB");var n=1024*a;if(e<n)return"".concat((e/a).toFixed(2)," MB");var r=1024*n;return e<r?"".concat((e/r).toFixed(2)," GB"):"< 1 TB"},X=function(e){var t=e.folder,a=e.handleDelete,n=e.handleSelect,r=e.selected,i=void 0!==r&&r,c=e.hideActions,o=void 0!==c&&c;return Object(T.jsxs)(I.a,{selected:i,onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(T.jsx)(A.a,{children:Object(T.jsx)(G.a,{children:Object(T.jsx)(L.a,{})})}),Object(T.jsx)(P.a,{primary:t.name,secondary:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(H,{color:"lightblue",title:"size",text:Q(t.size)}),Object(T.jsx)(H,{color:"lightgreen",title:"created",text:K()(t.createdOn).fromNow()})]})}),!o&&Object(T.jsx)(J.a,{children:Object(T.jsx)(v.a,{edge:"end","aria-label":"delete",onClick:function(){return null===a||void 0===a?void 0:a(t)},children:Object(T.jsx)(q.a,{})})})]})},Y=function(e){var t=e.dataFolders,a=e.handleSelect,n=e.handleDelete,r=o.a.useState(void 0),i=Object(h.a)(r,2),c=i[0],d=i[1];return Object(T.jsxs)(T.Fragment,{children:[0===t.length&&Object(T.jsx)(m.a,{variant:"body1",children:"No Data Folders"}),t.length>0&&Object(T.jsx)(B.a,{dense:!0,children:t.map((function(e){return Object(T.jsx)(X,{selected:e===c,folder:e,handleSelect:function(e){e===c?(d(void 0),null===a||void 0===a||a(void 0)):(d(e),null===a||void 0===a||a(e))},handleDelete:function(e){return null===n||void 0===n?void 0:n(e)}})}))})]})},$=a(130),ee=a.n($),te=function(e){var t=e.dataMaps,a=e.handleEdit;return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{children:Object(T.jsx)(B.a,{dense:!0,children:t.map((function(e){return Object(T.jsxs)(I.a,{children:[Object(T.jsx)(A.a,{children:Object(T.jsx)(G.a,{children:Object(T.jsx)(L.a,{})})}),Object(T.jsx)(P.a,{primary:e.name,secondary:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(H,{color:"lightblue",title:"size",text:e.id})})}),Object(T.jsx)(J.a,{children:Object(T.jsx)(v.a,{edge:"end","aria-label":"edit",onClick:function(){return null===a||void 0===a?void 0:a(e)},children:Object(T.jsx)(ee.a,{})})})]})}))})})})};!function(e){e.unknown="",e.aesAerialPhotos="aes_aerial_photos"}(i||(i={}));var ae,ne=(n={},Object(p.a)(n,i.unknown,"Unknown"),Object(p.a)(n,i.aesAerialPhotos,"AES Aerial Photos"),n);!function(e){e.unknown="unknown",e.string="string",e.commaSeparatedString="comma_separated_string",e.integer="integer",e.decimal="decimal",e.date="date"}(ae||(ae={}));var re=(r={},Object(p.a)(r,ae.unknown,"Unknown"),Object(p.a)(r,ae.string,"Text data"),Object(p.a)(r,ae.commaSeparatedString,"Comma separated string data"),Object(p.a)(r,ae.integer,"Numeric data (non floating point)"),Object(p.a)(r,ae.decimal,"Numeric data (floating point)"),Object(p.a)(r,ae.date,"Date Expression in standard format"),r),ie=a(131),ce=a.n(ie).a.create({baseURL:"https://localhost:44399/api/v1",headers:{"Content-type":"application/json"}}),oe=a(255),de=(a(188),a(21)),le=a(93),se=a(42),ue=a(132),je=function(e){var t=e.data,a=e.handleUpdate,n=o.a.useState([]),r=Object(h.a)(n,2),i=r[0],c=r[1];o.a.useEffect((function(){c(t)}),[t]);var d=function(e){var t=e.id,n=e.value,r=e.api,o=e.field,d=e.options;return Object(T.jsx)(le.a,{fullWidth:!0,labelId:"map-entry-type-label",id:"map-entry-type",value:n,onChange:function(e){var n=Object(de.a)(i);n[t]=Object(j.a)(Object(j.a)({},n[t]),{},Object(p.a)({},o,e.target.value)),c(n),null===a||void 0===a||a(n),r.setCellMode(t,o,"view")},children:Object.keys(d).map((function(e){return Object(T.jsx)(se.a,{value:e,children:d[e]},e)}))})},l=[{field:"id",headerName:"Column Offset",width:50},{field:"columnName",headerName:"Column name",flex:1},{field:"type",headerName:"Data Type",editable:!0,flex:1,renderCell:function(e){var t;return null!==(t=re[e.value])&&void 0!==t?t:""},renderEditCell:function(e){return Object(T.jsx)(d,Object(j.a)({options:re},e))}},{field:"mapTo",headerName:"Map To Location",editable:!0,flex:1,renderCell:function(e){var t;return null!==(t=ne[e.value])&&void 0!==t?t:""},renderEditCell:function(e){return Object(T.jsx)(d,Object(j.a)({options:ne},e))}},{field:"exampleContent",headerName:"Example Data",editable:!1,flex:1,renderCell:function(e){return e.value[0]}}];return 0===t.length?Object(T.jsx)(m.a,{variant:"caption",children:"No mapping data"}):Object(T.jsx)("div",{style:{display:"flex",height:"100%"},children:Object(T.jsx)("div",{style:{flexGrow:1},children:Object(T.jsx)(ue.a,{density:"compact",autoHeight:!0,pageSize:15,rows:i,columns:l})})})},be=a(5),he=a(244),pe=a(245),fe=Object(be.a)((function(e){return{root:{height:15,borderRadius:5},colorPrimary:{backgroundColor:"#EEEEEE"},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}}))(he.a),Oe=function(e){var t=e.handleDataImported,a=e.endpoint,n=void 0===a?"/data/upload":a,r=o.a.useState(0),i=Object(h.a)(r,2),c=i[0],d=i[1],l=o.a.useState(!1),s=Object(h.a)(l,2),u=s[0],j=s[1],b=o.a.useState(void 0),p=Object(h.a)(b,2),f=p[0],O=p[1],x=o.a.useState(void 0),g=Object(h.a)(x,2),C=g[0],k=g[1];return Object(T.jsxs)(T.Fragment,{children:[f&&u&&Object(T.jsxs)(D.a,{className:"mb25",display:"flex",alignItems:"center",children:[Object(T.jsx)(D.a,{width:"100%",mr:1,children:Object(T.jsx)(fe,{variant:"determinate",value:c})}),Object(T.jsx)(D.a,{minWidth:35,children:Object(T.jsx)(m.a,{variant:"body2",color:"textSecondary",children:"".concat(c,"%")})})]}),!f&&!u&&Object(T.jsxs)("label",{htmlFor:"btn-upload",children:[Object(T.jsx)("input",{id:"btn-upload",name:"btn-upload",style:{display:"none"},type:"file",accept:".zip",onChange:function(e){return function(e){e.target.files&&0!==e.target.files.length&&O(e.target.files[0])}(e)}}),Object(T.jsx)(y.a,{className:"btn-choose",variant:"outlined",component:"span",children:"Choose Zip File"})]}),f&&!u&&Object(T.jsxs)(pe.a,{container:!0,alignContent:"center",children:[Object(T.jsxs)(pe.a,{item:!0,children:[f.name,Object(T.jsx)(v.a,{"aria-label":"delete",onClick:function(){O(void 0)},children:Object(T.jsx)(q.a,{})})]}),Object(T.jsx)(pe.a,{item:!0,children:Object(T.jsx)(y.a,{className:"btn-upload",color:"primary",variant:"contained",component:"span",onClick:function(){return function(e){j(!0);var a=new FormData;a.append("file",e),ce.post(n,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){d(Math.round(100*e.loaded/e.total))}}).then((function(e){k("file upload complete"),t(e.data)})).catch((function(e){k(e.message)})).finally((function(){O(void 0)}))}(f)},children:"Upload"})})]}),C&&Object(T.jsx)("div",{children:C})]})},xe=function(e){var t=e.open,a=e.message,n=e.handleClose,r=e.handleDataImported,i=e.endpoint;return Object(T.jsxs)(C.a,{open:t,onClose:function(){return null===n||void 0===n?void 0:n()},"aria-labelledby":"form-dialog-title",children:[Object(T.jsx)(k.a,{id:"form-dialog-title",children:"Data Import"}),Object(T.jsxs)(w.a,{children:[Object(T.jsx)(S.a,{children:a}),Object(T.jsx)(Oe,{endpoint:i,handleDataImported:function(e){return null===r||void 0===r?void 0:r(e)}})]}),Object(T.jsx)(F.a,{children:Object(T.jsx)(y.a,{onClick:function(){return null===n||void 0===n?void 0:n()},color:"secondary",children:"Close"})})]})},me=a(254),ge=a(251),ve=function(e){var t=e.folder,a=e.message,n=e.handleClose,r=e.handleDataDeleted,i=e.endpoint,c=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.delete("".concat(i,"/").concat(btoa(t)));case 2:r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(C.a,{open:void 0!==t,onClose:function(){return n()},"aria-labelledby":"delete-data-folder","aria-describedby":"Delete a data folder",children:[Object(T.jsx)(k.a,{id:"delete-data-folder",children:"Delete Data"}),Object(T.jsx)(w.a,{children:Object(T.jsxs)(S.a,{id:"alert-dialog-description",children:[Object(T.jsxs)(me.a,{severity:"warning",children:[Object(T.jsx)(ge.a,{children:"Warning"}),a]}),t&&Object(T.jsx)(X,{folder:t,hideActions:!0})]})}),Object(T.jsxs)(F.a,{children:[Object(T.jsx)(y.a,{onClick:function(){return t&&c(null===t||void 0===t?void 0:t.name)},color:"secondary",children:"Delete"}),Object(T.jsx)(y.a,{onClick:function(){return n()},color:"primary",autoFocus:!0,children:"Keep"})]})]})},ye=Object(f.a)((function(e){return{grow:{flexGrow:1},title:Object(p.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})}})),Ce=function(e){var t=[],a=e.data[0],n=e.data.length;return a.forEach((function(a,r){for(var c=[],o=1;o<n;o++)c.push(e.data[1][r]);var d=t[r];(!d||d&&d.columnName!==a)&&(t[r]={id:r,type:ae.string,columnName:a,exampleContent:c,mapTo:i.unknown})})),t},ke=function(){var e=o.a.useState(!1),t=Object(h.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),i=Object(h.a)(r,2),c=i[0],d=i[1],l=o.a.useState(void 0),s=Object(h.a)(l,2),p=s[0],f=s[1],E=o.a.useState([]),M=Object(h.a)(E,2),z=M[0],U=M[1],B=o.a.useState([]),I=Object(h.a)(B,2),A=I[0],G=I[1],P=o.a.useState(void 0),J=Object(h.a)(P,2),_=J[0],V=J[1],H=o.a.useState(!1),Z=Object(h.a)(H,2),q=Z[0],Q=Z[1],X=o.a.useState(void 0),$=Object(h.a)(X,2),ee=$[0],ae=$[1],ne=function(){var e=Object(b.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.get("map/list");case 2:200===(t=e.sent).status&&(a=t.data,U(a.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{data:JSON.parse(e.data)})}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.post("map/upsert",{id:t.id,name:t.name,data:JSON.stringify(t.data)});case 2:200===e.sent.status&&ne();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.delete("map/delete/".concat(t.id));case 2:200===e.sent.status&&ne();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.get("/data/list");case 2:t=e.sent,G(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.post("map/buildFromData/".concat(btoa(t.name)));case 2:a=e.sent,n=Ce(a.data),V({id:Object(oe.a)(),name:"Generated Map ".concat(K()().toISOString()),data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();o.a.useEffect((function(){de(),ne()}),[]);var se=ye();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:se.grow,children:Object(T.jsx)(O.a,{position:"static",children:Object(T.jsxs)(x.a,{children:[Object(T.jsx)(m.a,{className:se.title,variant:"h6",noWrap:!0,children:"Data Conversion Utilities"}),Object(T.jsx)("div",{className:se.grow}),Object(T.jsx)(g.a,{title:"Data Folders",children:Object(T.jsx)(v.a,{"aria-label":"data folders",color:"inherit",onClick:function(){return n(!0)},children:Object(T.jsx)(L.a,{})})}),Object(T.jsx)(v.a,{"aria-label":"data mappings",color:"inherit",onClick:function(){return d(!0)},children:Object(T.jsx)(g.a,{title:"Mappings",children:Object(T.jsx)(R.a,{})})})]})})}),Object(T.jsxs)(W,{title:"Data Folders",handleClose:function(){n(!1),f(void 0)},open:a,children:[Object(T.jsx)(m.a,{variant:"h4",children:"Data Folders"}),Object(T.jsx)(Y,{dataFolders:A,handleSelect:function(e){return f(e)},handleDelete:function(e){return ae(e)}}),Object(T.jsx)(y.a,{disabled:void 0===p,onClick:function(){return p&&le(p)},children:"Generate Structure from Data"}),Object(T.jsx)(y.a,{onClick:function(){return Q(!0)},children:"Upload Data"})]}),Object(T.jsxs)(W,{title:"Data Mappings",handleClose:function(){return d(!1)},open:c,children:[Object(T.jsx)(m.a,{variant:"h4",children:"Data Mappings"}),Object(T.jsx)(te,{dataMaps:z,handleEdit:function(e){return V(e)}})]}),_&&Object(T.jsxs)(C.a,{fullWidth:!0,maxWidth:"lg",open:void 0!==_,onClose:function(){return V(void 0)},"aria-labelledby":"max-width-dialog-title",children:[Object(T.jsx)(k.a,{id:"max-width-dialog-title",children:"Edit Mapping Data"}),Object(T.jsxs)(w.a,{children:[Object(T.jsx)(S.a,{children:"Edit the data to map to the desired destinations."}),Object(T.jsx)(D.a,{style:{marginBottom:10},children:Object(T.jsx)(N.a,{fullWidth:!0,label:"Map Name",size:"medium",name:"map-name",value:_.name,onChange:function(e){return V(Object(j.a)(Object(j.a)({},_),{},{name:e.target.value}))}})}),Object(T.jsx)(je,{handleUpdate:function(e){return V(Object(j.a)(Object(j.a)({},_),{},{data:e}))},data:_.data})]}),Object(T.jsxs)(F.a,{children:[Object(T.jsx)(y.a,{onClick:function(){return V(void 0)},color:"secondary",children:"Close"}),Object(T.jsx)(y.a,{onClick:function(){ie(_),V(void 0)},color:"secondary",children:"Delete"}),Object(T.jsx)(y.a,{onClick:function(){re(_),V(void 0)},color:"primary",children:"Save Data Mapping Configuration"})]})]}),Object(T.jsx)(xe,{message:"Upload must be a zip file. The root of the zip file should contain the data in a CSV (comma separated values) file. Any photos referenced in the CSV file should be in a folder called 'photos'",endpoint:"/data/upload",handleDataImported:function(e){de(),Q(!1)},open:q,handleClose:function(){return Q(!1)}}),Object(T.jsx)(ve,{message:"This will permanently delete this data folder. Are you sure this is what you want?",endpoint:"/data/delete",handleDataDeleted:function(){de(),ae(void 0)},folder:ee,handleClose:function(){return ae(void 0)}})]})};l.a.render(Object(T.jsx)(o.a.StrictMode,{children:Object(T.jsx)(ke,{})}),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.3cd2c61b.chunk.js.map